# V-Talk Beta - HAI3 Architecture Rules
# Based on https://github.com/HAI3org/HAI3/tree/main/.ai
# Adapted for Flutter development

## ğŸ—ï¸ ARCHITECTURE PRINCIPLES

### ğŸ“ Folder Structure (Strict)
```
lib/
â”œâ”€â”€ core/                    # L1/L2 - Core business logic
â”‚   â”œâ”€â”€ api/                # API services and clients
â”‚   â”œâ”€â”€ models/             # Data models and entities
â”‚   â”œâ”€â”€ providers/          # State management (Riverpod)
â”‚   â”œâ”€â”€ utils/              # Utilities and helpers
â”‚   â””â”€â”€ constants/         # App constants and tokens
â”œâ”€â”€ presentation/           # L4 - UI Layer
â”‚   â”œâ”€â”€ screens/            # Full screen widgets
â”‚   â”œâ”€â”€ widgets/            # Reusable UI components
â”‚   â”œâ”€â”€ themes/             # Theme and design tokens
â”‚   â””â”€â”€ navigation/        # Navigation and routing
â””â”€â”€ data/                  # Data layer
    â”œâ”€â”€ repositories/       # Repository implementations
    â””â”€â”€ datasources/       # Data sources (local/remote)
```

### ğŸ¯ Layer Separation Rules

#### L1/L2 - Business Logic (Core)
- **NO UI code** in core layer
- **NO Flutter imports** except for essential types
- **Pure Dart** business logic
- **State management** only
- **API communication** only
- **Data validation** only

#### L4 - UI Layer (Presentation)
- **NO business logic** in UI components
- **NO API calls** in widgets
- **NO state management** logic (only providers usage)
- **Pure UI composition** only
- **Styling and layout** only

### ğŸš« FORBIDDEN PATTERNS

#### âŒ Spaghetti Code
- **NO mixed concerns** in single file
- **NO UI + API** in same widget
- **NO business logic** in build methods
- **NO inline widgets** - extract to separate files

#### âŒ Hardcoded Values
- **NO magic numbers** - use constants
- **NO hardcoded colors** - use theme tokens
- **NO hardcoded strings** - use localization
- **NO hardcoded dimensions** - use spacing tokens

#### âŒ Poor Naming
- **NO abbreviations** - use descriptive names
- **NO single letters** (except loop variables)
- **NO Hungarian notation** - use Dart conventions
- **NO inconsistent naming** - follow Dart style

## ğŸ¨ DESIGN SYSTEM (HAI3 L4)

### ğŸ¯ Design Tokens
```dart
// Colors (HAI3 Minimalist)
class AppColors {
  static const primary = Color(0xFF00A3FF);      // Bright blue accent
  static const background = Color(0xFF000000);      // Pure black
  static const surface = Color(0xFF1A1A1A);        // Dark gray
  static const onSurface = Color(0xFFFFFFFF);      // Pure white
  static const onSurfaceVariant = Color(0xFF666666); // Muted gray
  static const error = Color(0xFFFF3B30);         // Red accent
  static const success = Color(0xFF30D158);        // Green accent
  static const warning = Color(0xFFFF9500);        // Orange accent
}

// Spacing (HAI3 8px grid)
class AppSpacing {
  static const xs = 4.0;
  static const sm = 8.0;
  static const md = 16.0;
  static const lg = 24.0;
  static const xl = 32.0;
  static const xxl = 48.0;
}

// Typography (HAI3 Minimalist)
class AppTextStyles {
  static const h1 = TextStyle(fontSize: 32, fontWeight: FontWeight.w700);
  static const h2 = TextStyle(fontSize: 24, fontWeight: FontWeight.w600);
  static const h3 = TextStyle(fontSize: 20, fontWeight: FontWeight.w600);
  static const body = TextStyle(fontSize: 16, fontWeight: FontWeight.w400);
  static const caption = TextStyle(fontSize: 14, fontWeight: FontWeight.w400);
}
```

### ğŸ¨ UI Principles
- **Minimalist design** - maximum content, minimum chrome
- **High contrast** - pure black/white with blue accent
- **Consistent spacing** - 8px grid system
- **Airy components** - generous padding and margins
- **Smooth animations** - subtle transitions only

## ğŸ§± COMPONENT RULES

### ğŸ“± Widget Structure
```dart
// âœ… CORRECT - Separated concerns
class LoginScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      body: Padding(
        padding: EdgeInsets.all(AppSpacing.md),
        child: Column(
          children: [
            const LogoWidget(),
            const SizedBox(height: AppSpacing.lg),
            EmailInputWidget(),
            const SizedBox(height: AppSpacing.sm),
            PasswordInputWidget(),
            const SizedBox(height: AppSpacing.lg),
            LoginButtonWidget(),
          ],
        ),
      ),
    );
  }
}

// âŒ WRONG - Mixed concerns
class LoginScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Column(
        children: [
          // âŒ Inline widget - extract to separate file
          Container(
            width: 100,
            height: 100,
            decoration: BoxDecoration(
              color: Colors.blue, // âŒ Hardcoded color
              borderRadius: BorderRadius.circular(50),
            ),
          ),
          // âŒ Business logic in UI
          TextField(
            onChanged: (value) {
              if (value.length > 10) { // âŒ Validation logic in UI
                print('Too long');
              }
            },
          ),
        ],
      ),
    );
  }
}
```

### ğŸ¯ Component Guidelines
- **Extract widgets** - no inline components
- **Use composition** - build complex UI from simple parts
- **Single responsibility** - each widget has one purpose
- **Reusable design** - components work in different contexts

## ğŸ”§ CODE QUALITY RULES

### ğŸ“ Naming Conventions
```dart
// âœ… CORRECT - Descriptive names
class UserAuthenticationService {
  Future<bool> validateUserCredentials(String email, String password) async {
    // Implementation
  }
}

// âŒ WRONG - Poor naming
class Auth {
  Future<bool> check(String e, String p) async {
    // Implementation
  }
}
```

### ğŸ¯ Function Rules
- **Single purpose** - one function does one thing
- **Pure functions** - no side effects when possible
- **Descriptive names** - what it does, not how
- **Maximum 20 lines** - break down complex functions

### ğŸ“‹ File Organization
- **One class per file** - no multiple classes
- **Logical grouping** - related files together
- **Clear naming** - file name matches class name
- **Small files** - maximum 200 lines

## ğŸš€ DEVELOPMENT WORKFLOW

### ğŸ“ Code Generation Rules
- **NO manual boilerplate** - use code generation
- **Consistent patterns** - generate repetitive code
- **Type safety** - use strong typing throughout
- **Documentation** - generate docs from code

### ğŸ§ª Testing Requirements
- **Unit tests** for all business logic
- **Widget tests** for all UI components
- **Integration tests** for critical user flows
- **Minimum 80% coverage** required

### ğŸ”„ Review Process
- **Self-review** - check against these rules
- **Peer review** - team validation
- **Automated checks** - linting and formatting
- **Documentation** - update as needed

## ğŸ¯ HAI3 PHILOSOPHY ADAPTATION

### ğŸ§  Mindset Rules
- **Think in layers** - always consider separation
- **Design for reuse** - build components once
- **Test first** - write tests before implementation
- **Refactor constantly** - improve code continuously

### ğŸ¨ Design Thinking
- **Mobile-first** - design for small screens
- **Accessibility** - design for all users
- **Performance** - optimize for 60fps
- **Consistency** - follow established patterns

### ğŸš€ Innovation Rules
- **Question assumptions** - don't follow blindly
- **Experiment safely** - try new approaches
- **Learn from failures** - iterate and improve
- **Share knowledge** - document discoveries

---

## ğŸ“‹ CHECKLIST FOR EVERY PR

### ğŸ—ï¸ Architecture
- [ ] Proper folder structure
- [ ] Layer separation maintained
- [ ] No mixed concerns
- [ ] No hardcoded values

### ğŸ¨ Design System
- [ ] Design tokens used
- [ ] Consistent spacing
- [ ] Proper theming
- [ ] Responsive design

### ğŸ§ª Code Quality
- [ ] Descriptive naming
- [ ] Single responsibility
- [ ] Proper error handling
- [ ] Documentation updated

### ğŸš€ Performance
- [ ] No unnecessary rebuilds
- [ ] Optimized widgets
- [ ] Efficient state management
- [ ] Smooth animations

---

*This file is the single source of truth for V-Talk Beta development rules.
All team members must follow these guidelines strictly.*
